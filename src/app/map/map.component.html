<div class="header"></div>

<div *ngIf="apiLoaded | async">
    <google-map #myGoogleMap class="google-map" height="100%" width="100%" [zoom]="zoom" [center]="center" [options]="options"
        (mapClick)="eventHandler($event,'mapClick')" (mapDblclick)="eventHandler($event,'mapDblclick')"
        (mapDrag)="eventHandler($event,'mapDrag')" (mapDragend)="eventHandler($event,'mapDragend')"
        (mapRightclick)="eventHandler($event,'mapRightclick')"
        (positionChanged)="eventHandler($event,'marker_positionChanged')"
        (zoomChanged)="eventHandler($event,'zoomChanged')">
        <map-marker #markerElem="mapMarker" *ngFor="let marker of markers" [position]="marker.position"
            [label]="marker.label" [title]="marker.title" [options]="marker.options" [icon]="marker.icon"
            (mapClick)="openInfo(markerElem, marker.data)">
        </map-marker>
    
        <map-info-window>
            <app-info 
                [marker]="selectedMarker"
                [user]="user"
                (closeEvent)="closeInfo()"
                (editEvent)="editMarker($event)"
                (deleteEvent)="deleteMarker($event)"
                (favouriteEvent)="favouriteMarker($event)"
            ></app-info>
        </map-info-window>
    </google-map>
    <app-map-legend (filterEvent)="filterMarkers($event)"></app-map-legend>
</div>